# 모바일 앱 개발 가이드 (통합)

**통합일**: 2025-01-26

---

## 📋 목차

1. [실제 기기 연결](#실제-기기-연결)
2. [Config.kt 설정](#configkt-설정)
3. [파일 복사 방법](#파일-복사-방법)

---

## 실제 기기 연결

### USB 케이블 연결 (권장)

1. **개발자 옵션 활성화**
   - 설정 → 휴대전화 정보 → 빌드 번호 7번 연속 터치

2. **USB 디버깅 활성화**
   - 설정 → 개발자 옵션 → USB 디버깅 켜기

3. **USB 연결**
   - Android 기기를 USB로 PC 연결
   - "USB 디버깅 허용" 팝업에서 "항상 허용" 체크 후 허용

4. **Android Studio에서 실행**
   - 실행 버튼(▶) 클릭
   - 연결된 기기 선택
   - 앱 설치 및 실행

### WiFi 연결 (Android 11 이상)

1. USB로 초기 연결 (한 번만)
2. 터미널에서: `adb tcpip 5555`
3. 기기 IP 주소 확인 (설정 → WiFi → 연결된 네트워크 정보)
4. 터미널에서: `adb connect [IP주소]:5555`
5. Android Studio에서 실행

### APK 파일로 설치

1. **APK 생성**
   - Build → Build Bundle(s) / APK(s) → Build APK(s)
   - 생성된 파일: `app/build/outputs/apk/debug/app-debug.apk`

2. **기기로 전송**
   - USB 복사, 이메일, 클라우드 스토리지 등

3. **설치**
   - APK 파일 탭
   - "알 수 없는 소스 허용" 설정
   - 설치 실행

---

## Config.kt 설정

### 파일 위치
```
app/src/main/java/com/hanjin/Config.kt
```

### 필수 설정

```kotlin
object Config {
    // 서버 URL
    const val SERVER_URL = "https://license-server-production-e83a.up.railway.app"
    
    // ESP32 BLE 설정
    const val ESP32_DEVICE_NAME = "한진택배 스캐너"
    const val ESP32_SERVICE_UUID = "12345678-1234-1234-1234-123456789ABC"
    const val ESP32_CHARACTERISTIC_UUID = "12345678-1234-1234-1234-123456789DEF"
    const val ESP32_HEARTBEAT_CHAR_UUID = "12345678-1234-1234-1234-123456789012"
}
```

### 에러 해결

**에러**: `Unresolved reference: ESP32_HEARTBEAT_CHAR_UUID`

**해결**: `Config.kt` 파일에 `ESP32_HEARTBEAT_CHAR_UUID` 상수 추가

---

## 파일 복사 방법

### 소스 파일 복사

1. **Java/Kotlin 파일**
   - 복사 위치: `app/src/main/java/com/hanjin/`
   - 필요한 파일:
     - `Config.kt`
     - `LoginActivity.kt`
     - `MainActivity.kt`
     - `api/ApiService.kt`
     - `ble/BLEService.kt`
     - `models/LoginRequest.kt`
     - `models/LoginResponse.kt`
     - `utils/DeviceUtils.kt`

2. **리소스 파일**
   - 복사 위치: `app/src/main/res/`
   - 필요한 파일:
     - `layout/activity_login.xml`
     - `layout/activity_main.xml`
     - `values/strings.xml`

3. **설정 파일**
   - `AndroidManifest.xml`
   - `app/build.gradle.kts`
   - `build.gradle.kts` (프로젝트 루트)
   - `settings.gradle.kts`

### 패키지 이름 확인

모든 파일의 패키지 선언이 `package com.hanjin`으로 통일되어 있어야 합니다.

### 복사 후 작업

1. **Gradle Sync**: File → Sync Project with Gradle Files
2. **빌드**: Build → Make Project
3. **오류 확인 및 수정**

---

## 참고

- 프로젝트 구조: `mobile_app/README.md` 참조
- API 엔드포인트: 서버 README 참조

