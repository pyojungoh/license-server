# 텔레그램 봇 설정 가이드

## 📱 받은 정보

- **봇 이름**: hanjinautobot
- **봇 주소**: t.me/hanjinautobot
- **봇 토큰**: `8537300640:AAHv3oXUylKx6-3MW3vT2TlGKewsJ6TMElE`

## 🔑 채팅 ID 확인 방법

### 방법 1: getUpdates API 사용 (권장)

1. **봇에게 메시지 보내기**
   - 텔레그램에서 `@hanjinautobot` 검색
   - 봇을 시작하고 아무 메시지나 보내기 (예: "테스트")

2. **채팅 ID 확인**
   - 브라우저에서 아래 URL 접속:
   ```
   https://api.telegram.org/bot8537300640:AAHv3oXUylKx6-3MW3vT2TlGKewsJ6TMElE/getUpdates
   ```
   
   - 응답에서 다음과 같은 부분을 찾습니다:
   ```json
   {
     "ok": true,
     "result": [
       {
         "update_id": ...,
         "message": {
           "message_id": 1,
           "from": {...},
           "chat": {
             "id": 123456789,  ← 이것이 채팅 ID입니다!
             "first_name": "...",
             "type": "private"
           },
           ...
         }
       }
     ]
   }
   ```
   
   - `"chat": { "id": 123456789 }` 부분의 숫자가 채팅 ID입니다.

### 방법 2: @userinfobot 사용

1. 텔레그램에서 `@userinfobot` 검색
2. 봇을 시작하면 자동으로 채팅 ID를 알려줍니다
3. 음수(-)가 붙은 ID는 그룹 채팅, 양수는 개인 채팅입니다

## ⚙️ Railway 환경변수 설정

### Railway 대시보드에서 설정

1. **Railway 프로젝트 접속**
   - https://railway.app 접속
   - 한진택배 라이선스 서버 프로젝트 선택

2. **환경변수 추가**
   - 프로젝트 → **Variables** 탭 클릭
   - **+ New Variable** 클릭

3. **환경변수 2개 추가**

   **첫 번째 환경변수:**
   - **Key**: `TELEGRAM_BOT_TOKEN`
   - **Value**: `8537300640:AAHv3oXUylKx6-3MW3vT2TlGKewsJ6TMElE`

   **두 번째 환경변수:**
   - **Key**: `TELEGRAM_CHAT_ID`
   - **Value**: `여기에_확인한_채팅_ID_입력` (예: `123456789`)

4. **서버 재배포**
   - 환경변수를 추가하면 Railway가 자동으로 재배포합니다
   - 재배포 완료까지 1-2분 소요

## ✅ 테스트

1. **서버 재배포 완료 대기**

2. **PC 프로그램에서 테스트**
   - PC 프로그램 실행
   - **도움말 → 관리자에게 메시지 보내기** 클릭
   - 종류, 제목, 내용 입력
   - **전송** 버튼 클릭

3. **텔레그램 확인**
   - `@hanjinautobot` 봇에서 메시지가 도착했는지 확인
   - 메시지가 도착하면 설정 성공!

## 📋 메시지 형식 예시

텔레그램으로 받게 될 메시지 형식:

```
📩 관리자 메시지

아이디: user123
종류: 입금확인
제목: 입금 확인 요청

내용:
2024년 12월 30일 입금했습니다.
확인 부탁드립니다.

회신 전화번호: 010-1234-5678

수신 시간: 2024-12-30 14:30:00
```

## 🔒 보안 주의사항

⚠️ **중요**: 봇 토큰을 공개하지 마세요!
- 봇 토큰은 Railway 환경변수에만 저장
- GitHub에 커밋하지 않기
- 다른 사람과 공유하지 않기

## 🆘 문제 해결

### 메시지가 안 오는 경우

1. **환경변수 확인**
   - Railway에서 `TELEGRAM_BOT_TOKEN`과 `TELEGRAM_CHAT_ID`가 올바르게 설정되었는지 확인
   - 대소문자 구분 확인

2. **채팅 ID 확인**
   - 다시 한번 `getUpdates` API로 채팅 ID 확인
   - 양수 숫자인지 확인 (개인 채팅의 경우)

3. **봇에게 메시지 보냈는지 확인**
   - 채팅 ID를 얻으려면 먼저 봇에게 메시지를 보내야 합니다

4. **서버 로그 확인**
   - Railway → 프로젝트 → Deployments → 로그 확인
   - "텔레그램 메시지 전송 성공" 메시지가 있는지 확인

### 에러 메시지

- **"텔레그램 봇 설정이 없습니다"**
  → 환경변수가 설정되지 않았습니다. Railway에서 확인하세요.

- **"chat not found"**
  → 채팅 ID가 잘못되었습니다. 다시 확인하세요.

- **"unauthorized"**
  → 봇 토큰이 잘못되었습니다. 토큰을 확인하세요.

## 📝 체크리스트

- [ ] 봇에게 메시지 보냄
- [ ] 채팅 ID 확인 완료
- [ ] Railway에 `TELEGRAM_BOT_TOKEN` 환경변수 추가
- [ ] Railway에 `TELEGRAM_CHAT_ID` 환경변수 추가
- [ ] 서버 재배포 완료 대기
- [ ] PC 프로그램에서 테스트 메시지 전송
- [ ] 텔레그램에서 메시지 수신 확인

---

**설정 완료 후 PC 프로그램에서 메시지를 보내면 텔레그램으로 알림이 옵니다!** 🎉



