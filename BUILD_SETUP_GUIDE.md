# 배포용 SETUP 프로그램 빌드 가이드

## 📌 개요

이 가이드는 배포용 Windows 설치 프로그램을 생성하는 방법을 설명합니다.

## 🎯 빌드 결과물

1. **실행 파일** (`dist/송장번호일괄처리시스템.exe`)
   - 단독 실행 가능한 포터블 버전
   - 설치 없이 바로 실행 가능

2. **설치 프로그램** (`installer/송장번호 일괄 처리 시스템_Setup_v1.0.0.exe`) ⭐ 권장
   - Windows 표준 설치 마법사
   - 시작 메뉴 등록
   - 제거 프로그램 포함
   - 사용자에게 배포 시 권장

## 🚀 빠른 시작

### 방법 1: 배치 파일 사용 (가장 간단) ⭐

```batch
build_setup.bat
```

이 파일을 더블클릭하면 자동으로 빌드가 시작됩니다.

### 방법 2: Python 스크립트 직접 실행

```bash
python build_setup.py
```

## 📋 사전 요구사항

### 필수
- **Python 3.8 이상** 설치됨
- **PyInstaller** 설치됨 (스크립트가 자동으로 설치함)
- 프로젝트의 모든 의존성 패키지 설치됨 (`requirements.txt`)

### 선택 (설치 프로그램 생성용)
- **Inno Setup 5 이상** 설치됨
  - 다운로드: https://jrsoftware.org/isdl.php
  - 설치 없이도 실행 파일은 빌드 가능

### 의존성 패키지 설치

```bash
pip install -r requirements.txt
```

## 🔧 빌드 프로세스

빌드 스크립트는 다음 단계를 자동으로 수행합니다:

1. **PyInstaller 확인 및 설치**
   - PyInstaller가 없으면 자동으로 설치합니다

2. **Inno Setup 확인**
   - Inno Setup이 설치되어 있는지 확인합니다
   - 없어도 실행 파일은 빌드 가능합니다

3. **실행 파일 빌드 (PyInstaller)**
   - `build_installer.spec` 파일을 사용하여 실행 파일 생성
   - `dist/송장번호일괄처리시스템.exe` 생성

4. **설치 프로그램 생성 (Inno Setup)**
   - `installer.iss` 파일을 사용하여 설치 프로그램 생성
   - `installer/송장번호 일괄 처리 시스템_Setup_v1.0.0.exe` 생성

## 📝 버전 관리

### 버전 변경 방법

`version.txt` 파일을 편집하여 버전을 변경합니다:

```
1.0.0
```

버전 형식: `메이저.마이너.패치` (예: `1.0.0`, `1.1.0`, `2.0.0`)

### 자동 적용

- `build_setup.py` 스크립트가 `version.txt`를 읽어서 버전 정보를 자동으로 적용합니다
- 설치 프로그램 파일명에 버전이 포함됩니다

## 📁 출력 파일 위치

```
hanjin/
├── dist/
│   └── 송장번호일괄처리시스템.exe          # 단독 실행 파일
└── installer/
    └── 송장번호 일괄 처리 시스템_Setup_v1.0.0.exe  # 설치 프로그램 ⭐
```

## 🧪 빌드 테스트

### 1. 실행 파일 테스트

```bash
# dist 폴더에서 실행 파일 직접 실행
dist\송장번호일괄처리시스템.exe
```

정상적으로 실행되는지 확인합니다.

### 2. 설치 프로그램 테스트

1. `installer/` 폴더의 설치 파일 실행
2. 설치 마법사가 정상적으로 동작하는지 확인
3. 설치 후 프로그램이 정상 실행되는지 확인
4. 제거 프로그램이 정상 동작하는지 확인

## ⚠️ 문제 해결

### 오류: "PyInstaller가 설치되지 않았습니다"

**해결**: 스크립트가 자동으로 설치하지만, 수동 설치도 가능합니다:

```bash
pip install pyinstaller
```

### 오류: "Inno Setup을 찾을 수 없습니다"

**해결**: 
- 설치 프로그램을 만들지 않아도 실행 파일은 빌드됩니다
- Inno Setup 설치: https://jrsoftware.org/isdl.php
- 설치 후 다시 빌드하세요

### 오류: "ModuleNotFoundError"

**해결**: 의존성 패키지가 모두 설치되어 있는지 확인:

```bash
pip install -r requirements.txt
```

### 빌드는 성공했지만 실행 파일이 작동하지 않음

**해결**:
1. 콘솔 모드로 빌드하여 오류 메시지 확인
   - `build_installer.spec`에서 `console=True`로 변경
   - 다시 빌드 후 실행하여 오류 메시지 확인
2. 로그 파일 확인 (`logs/` 폴더)

### 설치 프로그램 생성 실패

**해결**:
1. Inno Setup이 올바르게 설치되어 있는지 확인
2. `installer.iss` 파일의 경로가 올바른지 확인
3. `dist/송장번호일괄처리시스템.exe` 파일이 존재하는지 확인

## 📦 배포 준비 체크리스트

- [ ] 빌드가 성공적으로 완료됨
- [ ] 실행 파일이 정상 동작함
- [ ] 설치 프로그램이 정상 동작함
- [ ] 설치 후 프로그램이 정상 실행됨
- [ ] 제거 프로그램이 정상 동작함
- [ ] 버전 번호가 올바르게 표시됨
- [ ] README 파일이 포함되어 있음

## 🎯 배포

생성된 `installer/송장번호 일괄 처리 시스템_Setup_v1.0.0.exe` 파일을 배포합니다.

**배포 방법**:
- 이메일 첨부
- 클라우드 스토리지 (Google Drive, Dropbox 등)
- 파일 서버
- USB 드라이브

**사용자 안내**:
1. 설치 파일 실행
2. 설치 마법사 따라하기
3. 프로그램 실행
4. ESP32 연결 및 설정

---

**작성일**: 2024-12-26  
**최종 수정**: 2024-12-26





